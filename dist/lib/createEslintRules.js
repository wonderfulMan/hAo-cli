"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var hash_sum_1=__importDefault(require("hash-sum")),cli_shared_utils_1=require("@lartplus/cli-shared-utils"),cli_config_1=require("@lartplus/cli-config"),CreateEslintRules=function(){function e(e,t){this.context=e,this.chain=t}return e.prototype.createRules=function(){var e=this.context,t=e.cwdPath,i=e.configFile,s=i.framework,r=i.lintOnSave,l=cli_shared_utils_1.getCliModule(cli_config_1.PATHS.getLartPlusModulePath(t),"eslint",s),n=require(l).exportExtensions,a=!0===r||"warning"===r,o="error"===r;this.chain.module.rule("eslint").pre().exclude.add(/node_modules/).end().test(cli_config_1.LANGUAGE_TYPE.ESLINT).use("eslint-loader").loader(cli_shared_utils_1.maybeLoader("eslint-loader")).options({fix:!0,cache:!0,cacheIdentifier:hash_sum_1.default(new Date),extensions:n(this.context.configFile.typescript),emitWarning:a,emitError:o,eslintPath:cli_shared_utils_1.maybeLoader("eslint")})},e.prototype.buildLint=function(){(this.context.configFile.linter||require(this.context.cwdPath+"/package.json").devDependencies.eslint)&&this.createRules()},e}();exports.CreateEslintRules=CreateEslintRules;