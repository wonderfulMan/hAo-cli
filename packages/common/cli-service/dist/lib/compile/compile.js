var _0x168b=['目前只支持dev/build模式','call','next','hasOwnProperty','ops','dev','build','generatorBaseConfig','../parse/parseEnv','__assign','notice','value','./build','Generator\x20is\x20already\x20executing.','startServer','label','done','throw','apply','configFile','startBuild','webpackChain','length','pop','compile','assign','then','parseTemplate','parseEntries','return','trys','sent','error','parseEnv','function','mode'];(function(_0x4265e4,_0x168b34){var _0x501398=function(_0x31d4b4){while(--_0x31d4b4){_0x4265e4['push'](_0x4265e4['shift']());}};_0x501398(++_0x168b34);}(_0x168b,0x17b));var _0x5013=function(_0x4265e4,_0x168b34){_0x4265e4=_0x4265e4-0x0;var _0x501398=_0x168b[_0x4265e4];return _0x501398;};'use strict';var __assign=this&&this[_0x5013('0x1a')]||function(){return(__assign=Object[_0x5013('0x6')]||function(_0x167b55){for(var _0x3225bc,_0x5404d4=0x1,_0x33f3e3=arguments['length'];_0x5404d4<_0x33f3e3;_0x5404d4++)for(var _0x1bb279 in _0x3225bc=arguments[_0x5404d4])Object['prototype'][_0x5013('0x14')][_0x5013('0x12')](_0x3225bc,_0x1bb279)&&(_0x167b55[_0x1bb279]=_0x3225bc[_0x1bb279]);return _0x167b55;})[_0x5013('0x23')](this,arguments);},__awaiter=this&&this['__awaiter']||function(_0xf88de6,_0x440948,_0x1bcdff,_0x1d0697){return new(_0x1bcdff=_0x1bcdff||Promise)(function(_0xa239d0,_0x39d265){function _0x1e9b2c(_0x16154){try{_0x149e23(_0x1d0697[_0x5013('0x13')](_0x16154));}catch(_0x151fcd){_0x39d265(_0x151fcd);}}function _0x1b085a(_0x28f259){try{_0x149e23(_0x1d0697[_0x5013('0x22')](_0x28f259));}catch(_0x3cb6ff){_0x39d265(_0x3cb6ff);}}function _0x149e23(_0x4cd1bc){var _0x309b7f;_0x4cd1bc[_0x5013('0x21')]?_0xa239d0(_0x4cd1bc[_0x5013('0x1c')]):((_0x309b7f=_0x4cd1bc['value'])instanceof _0x1bcdff?_0x309b7f:new _0x1bcdff(function(_0x346a0b){_0x346a0b(_0x309b7f);}))[_0x5013('0x7')](_0x1e9b2c,_0x1b085a);}_0x149e23((_0x1d0697=_0x1d0697[_0x5013('0x23')](_0xf88de6,_0x440948||[]))[_0x5013('0x13')]());});},__generator=this&&this['__generator']||function(_0x598cec,_0x245f34){var _0x33f89f,_0x63dbe5,_0x3c3cf2,_0xdf5e44={'label':0x0,'sent':function(){if(0x1&_0x3c3cf2[0x0])throw _0x3c3cf2[0x1];return _0x3c3cf2[0x1];},'trys':[],'ops':[]},_0x2b3425={'next':_0x16442c(0x0),'throw':_0x16442c(0x1),'return':_0x16442c(0x2)};return _0x5013('0xf')==typeof Symbol&&(_0x2b3425[Symbol['iterator']]=function(){return this;}),_0x2b3425;function _0x16442c(_0x1dffab){return function(_0x547ff2){return function(_0x48a31c){if(_0x33f89f)throw new TypeError(_0x5013('0x1e'));for(;_0xdf5e44;)try{if(_0x33f89f=0x1,_0x63dbe5&&(_0x3c3cf2=0x2&_0x48a31c[0x0]?_0x63dbe5[_0x5013('0xa')]:_0x48a31c[0x0]?_0x63dbe5[_0x5013('0x22')]||((_0x3c3cf2=_0x63dbe5[_0x5013('0xa')])&&_0x3c3cf2['call'](_0x63dbe5),0x0):_0x63dbe5[_0x5013('0x13')])&&!(_0x3c3cf2=_0x3c3cf2['call'](_0x63dbe5,_0x48a31c[0x1]))[_0x5013('0x21')])return _0x3c3cf2;switch(_0x63dbe5=0x0,_0x3c3cf2&&(_0x48a31c=[0x2&_0x48a31c[0x0],_0x3c3cf2['value']]),_0x48a31c[0x0]){case 0x0:case 0x1:_0x3c3cf2=_0x48a31c;break;case 0x4:return _0xdf5e44['label']++,{'value':_0x48a31c[0x1],'done':!0x1};case 0x5:_0xdf5e44[_0x5013('0x20')]++,_0x63dbe5=_0x48a31c[0x1],_0x48a31c=[0x0];continue;case 0x7:_0x48a31c=_0xdf5e44[_0x5013('0x15')][_0x5013('0x4')](),_0xdf5e44[_0x5013('0xb')][_0x5013('0x4')]();continue;default:if(!(_0x3c3cf2=0x0<(_0x3c3cf2=_0xdf5e44[_0x5013('0xb')])['length']&&_0x3c3cf2[_0x3c3cf2[_0x5013('0x3')]-0x1])&&(0x6===_0x48a31c[0x0]||0x2===_0x48a31c[0x0])){_0xdf5e44=0x0;continue;}if(0x3===_0x48a31c[0x0]&&(!_0x3c3cf2||_0x48a31c[0x1]>_0x3c3cf2[0x0]&&_0x48a31c[0x1]<_0x3c3cf2[0x3])){_0xdf5e44['label']=_0x48a31c[0x1];break;}if(0x6===_0x48a31c[0x0]&&_0xdf5e44[_0x5013('0x20')]<_0x3c3cf2[0x1]){_0xdf5e44[_0x5013('0x20')]=_0x3c3cf2[0x1],_0x3c3cf2=_0x48a31c;break;}if(_0x3c3cf2&&_0xdf5e44['label']<_0x3c3cf2[0x2]){_0xdf5e44[_0x5013('0x20')]=_0x3c3cf2[0x2],_0xdf5e44[_0x5013('0x15')]['push'](_0x48a31c);break;}_0x3c3cf2[0x2]&&_0xdf5e44['ops'][_0x5013('0x4')](),_0xdf5e44[_0x5013('0xb')][_0x5013('0x4')]();continue;}_0x48a31c=_0x245f34[_0x5013('0x12')](_0x598cec,_0xdf5e44);}catch(_0x25a84a){_0x48a31c=[0x6,_0x25a84a],_0x63dbe5=0x0;}finally{_0x33f89f=_0x3c3cf2=0x0;}if(0x5&_0x48a31c[0x0])throw _0x48a31c[0x1];return{'value':_0x48a31c[0x0]?_0x48a31c[0x1]:void 0x0,'done':!0x0};}([_0x1dffab,_0x547ff2]);};}};exports['__esModule']=!0x0;var cli_shared_utils_1=require('@lartplus/cli-shared-utils'),parseEntries_1=require('../parse/parseEntries'),parseEnv_1=require(_0x5013('0x19')),parseTemplate_1=require('../parse/parseTemplate'),parseMerge_1=require('../parse/parseMerge'),generatorChainConfig_1=require('../config/generatorChainConfig'),server_1=require('./server'),build_1=require(_0x5013('0x1d')),validate=function(_0x795b24){return _0x5013('0x16')==_0x795b24||'build'==_0x795b24||(cli_shared_utils_1[_0x5013('0x1b')][_0x5013('0xd')]([_0x5013('0x11')]),!0x1);},compile=function(_0x58261b,_0x51c353){return __awaiter(void 0x0,void 0x0,void 0x0,function(){var _0x22be37,_0x423e11,_0x11f49e,_0x4884dc,_0x36be8e,_0x2b314d,_0x3a8996,_0x1ffa92,_0x499f5d,_0x4b869e;return __generator(this,function(_0x322328){switch(_0x322328[_0x5013('0x20')]){case 0x0:return _0x22be37=_0x58261b[_0x5013('0x10')],validate(_0x22be37)?[0x4,parseEnv_1[_0x5013('0xe')](_0x58261b,_0x51c353)]:[0x3,0x6];case 0x1:return _0x423e11=_0x322328[_0x5013('0xc')](),[0x4,parseEntries_1[_0x5013('0x9')](_0x51c353)];case 0x2:return _0x11f49e=_0x322328[_0x5013('0xc')](),[0x4,parseTemplate_1[_0x5013('0x8')](_0x51c353,_0x11f49e)];case 0x3:return _0x4884dc=_0x322328[_0x5013('0xc')](),_0x36be8e=parseMerge_1['parseMerge'](_0x11f49e,_0x4884dc),_0x2b314d=__assign(__assign({},_0x51c353),{'env':_0x423e11,'mode':_0x22be37}),_0x3a8996=new generatorChainConfig_1['GeneratorChainConfig'](_0x2b314d,_0x36be8e),_0x1ffa92=_0x3a8996[_0x5013('0x18')](),(_0x499f5d=null===(_0x4b869e=_0x2b314d[_0x5013('0x0')])||void 0x0===_0x4b869e?void 0x0:_0x4b869e[_0x5013('0x2')])&&_0x5013('0xf')==typeof _0x499f5d?[0x4,_0x499f5d(_0x1ffa92)]:[0x3,0x5];case 0x4:_0x322328[_0x5013('0xc')](),_0x322328[_0x5013('0x20')]=0x5;case 0x5:_0x5013('0x16')===_0x22be37&&server_1[_0x5013('0x1f')](_0x1ffa92,_0x2b314d,_0x36be8e),_0x5013('0x17')===_0x22be37&&build_1[_0x5013('0x1')](_0x1ffa92,_0x2b314d,_0x36be8e),_0x322328[_0x5013('0x20')]=0x6;case 0x6:return[0x2];}});});};exports[_0x5013('0x5')]=compile;